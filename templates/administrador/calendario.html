{% extends "admin/dashboard.html" %}
{% block title %}Calendario | Administrador{% endblock %}
{% block content %}
<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <button id="btn-hoy" class="btn btn-outline-primary me-2">Hoy</button>
      <button id="btn-mes" class="btn btn-outline-secondary me-2">Mes</button>
      <button id="btn-año" class="btn btn-outline-secondary">Año</button>
    </div>

    <h4 id="titulo-mes" class="text-capitalize m-0"></h4>

    <div class="d-flex align-items-center">
      <select id="select-usuario" class="form-select me-2" style="width:200px">
        <option value="admin">Mi calendario</option>
      </select>
      <button id="btn-nuevo-evento" class="btn btn-success">
        <i class="bi bi-plus-circle"></i> Crear evento
      </button>
    </div>
  </div>

  <div id="calendar-grid" class="d-grid" 
       style="grid-template-columns: repeat(7, 1fr); gap: 8px;"></div>
</div>

<!-- Modal para mostrar eventos -->
<div class="modal fade" id="modalEventosDia" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-light">
        <h5 class="modal-title" id="modalEventosDiaLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="contenidoEventosDia"></div>
    </div>
  </div>
</div>

<!-- Modal para crear nuevo evento -->
<div class="modal fade" id="modalNuevoEvento" tabindex="-1">
  <div class="modal-dialog">
    <form id="form-nuevo-evento" class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title">Crear nuevo evento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Fecha</label>
          <input type="date" name="fecha" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Hora</label>
          <input type="time" name="hora" class="form-control">
        </div>
        <div class="mb-3">
          <label class="form-label">Ubicación</label>
          <input type="text" name="ubicacion" class="form-control">
        </div>
        <div class="mb-3">
          <label class="form-label">Tipo de evento</label>
          <select name="tipo" class="form-select" required>
            <option value="Entregas">Entrega</option>
            <option value="Instalaciones">Instalación</option>
            <option value="Reuniones internas">Reunión interna</option>
            <option value="Eventos">Evento</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Asignar a:</label>
          <select name="id_usuario" class="form-select" id="select-asignar"></select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-success">Guardar</button>
      </div>
    </form>
  </div>
</div>

<style>
.day {
  border: 1px solid #ddd;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
  position: relative;
  background: #fff;
}
.day.hoy {
  border: 2px solid #007bff;
}
.event-tags {
  display: flex;
  flex-wrap: wrap;
}
.highlight-today {
  animation: resaltar 1s ease-in-out alternate infinite;
}
@keyframes resaltar {
  from { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.4); }
  to { box-shadow: 0 0 10px 5px rgba(0, 123, 255, 0.4); }
}
</style>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/calendario_admin.js') }}"></script>
{% endblock %}
