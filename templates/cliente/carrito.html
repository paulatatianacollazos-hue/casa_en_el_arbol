{% extends "cliente/dashboard.html" %}

{% block title %}Tu carrito | Casa en el √Årbol{% endblock %}

{% block content %}
<div class="container my-5">
  <h2 class="mb-4 text-success">üõí Tu carrito</h2>
  <div id="cart-items" class="list-group mb-4"></div>
  <div class="d-flex justify-content-between align-items-center">
    <h4>Total: <span id="cart-total" class="text-success">$0.00</span></h4>
    <button class="btn btn-primary" id="finalizar-compra">Finalizar compra</button>
  </div>
</div>
{% endblock %}

{% block extra_footer %}
{% if current_user.is_authenticated %}
<script>
  window.FLASK_USER_ID = "{{ current_user.id }}";
</script>
{% else %}
<script>
  window.FLASK_USER_ID = null;
</script>
{% endif %}

<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
<script>
  document.getElementById("finalizar-compra").addEventListener("click", function() {
    if (cart.length === 0) {
      alert("Tu carrito est√° vac√≠o.");
      return;
    }
    saveCart(); // Guarda el carrito en localStorage
    window.location.href = "/cliente/pagos"; // Redirige a pagos
  });
</script>
{% endblock %}
