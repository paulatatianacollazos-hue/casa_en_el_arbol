{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>Comparar Productos</h2>

  <form method="POST">
    <div class="row">
      {% for p, c, img in productos %}
        <div class="col-md-4 mb-3">
          <div class="card shadow-sm">
            {% if img %}
              <img src="{{ img }}" class="card-img-top" alt="{{ p.NombreProducto }}">
            {% else %}
              <img src="{{ url_for('static', filename='img/no-image.png') }}" class="card-img-top" alt="Sin imagen">
            {% endif %}
            <div class="card-body">
              <h5>{{ p.NombreProducto }}</h5>
              <p><strong>Material:</strong> {{ p.Material }}</p>
              <p><strong>Color:</strong> {{ p.Color }}</p>
              <p><strong>Precio:</strong> ${{ "%.2f"|format(p.PrecioUnidad) }}</p>
              <p><strong>Categoría:</strong> {{ c.NombreCategoria }}</p>
              <input type="checkbox" name="productos" value="{{ p.ID_Producto }}">
              Seleccionar
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
    <button type="submit" class="btn btn-primary">Comparar seleccionados</button>
  </form>

  {% if seleccionados %}
  <hr>
  <h3>Resultado de la comparación</h3>
  <div class="row">
    {% for p, c, img in seleccionados %}
      <div class="col-md-4 mb-3">
        <div class="card shadow-sm">
          {% if img %}
            <img src="{{ img }}" class="card-img-top" alt="{{ p.NombreProducto }}">
          {% else %}
            <img src="{{ url_for('static', filename='img/no-image.png') }}" class="card-img-top" alt="Sin imagen">
          {% endif %}
          <div class="card-body">
            <h5>{{ p.NombreProducto }}</h5>
            <p><strong>Material:</strong> {{ p.Material }}</p>
            <p><strong>Color:</strong> {{ p.Color }}</p>
            <p><strong>Precio:</strong> ${{ "%.2f"|format(p.PrecioUnidad) }}</p>
            <p><strong>Categoría:</strong> {{ c.NombreCategoria }}</p>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  {% endif %}
</div>
{% endblock %}
